{%- comment -%}
  ---------------------------  WARNING  ---------------------------
  This file is auto-generated by WR and should not be modified.
  It may be overwritten and any customizations would be lost.
  ---------------------------  WARNING  ---------------------------
{%- endcomment -%}
<script>
   {%- comment -%} common data {%- endcomment -%}
   window.WR = window.WR || {};
  window.WR.wrpickup = window.WR.wrpickup || {};
   window.WR.common = window.WR.common || {};
   window.WR.common.Shopify = window.WR.common.Shopify || {};
  	window.WR.wrpickup.is_installed = true;
  {% comment %} window.WR.wrpickup.loader = '{{ 'loader.gif' | asset_url }}'; {% endcomment %}
  window.WR.wrpickup.loader = '';
   window.WR.common.Shopify.shop = {
       domain: '{{ shop.domain }}',
       permanent_domain: '{{ shop.permanent_domain }}',
       url: '{{ shop.url }}',
       secure_url: '{{ shop.secure_url }}',
       money_format: {{ shop.money_format | json }},
       currency: {{ shop.currency | json }}
   };
   window.WR.common.Shopify.customer = {
       id: {{ customer.id | json }},
     	email: {{ customer.email | json  }},
       tags: {{ customer.tags | json }},
   };
   window.WR.common.Shopify.cart = {{ cart | json }};
   window.WR.common.template = '{{ template }}';
   {%- comment -%} common functions {%- endcomment -%}
   window.WR.common.Shopify.formatMoney = function(money, format) {
       function n(t, e) {
           return "undefined" == typeof t ? e : t
       }
       function r(t, e, r, i) {
           if (e = n(e, 2),
           r = n(r, ","),
           i = n(i, "."),
           isNaN(t) || null == t)
               return 0;
           t = (t / 100).toFixed(e);
           var o = t.split(".")
             , a = o[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g, "$1" + r)
             , s = o[1] ? i + o[1] : "";
           return a + s
       }
       "string" == typeof money && (money = money.replace(".", ""));
       var i = ""
         , o = /\{\{\s*(\w+)\s*\}\}/
         , a = format || window.WR.common.Shopify.shop.money_format || window.Shopify.money_format || "$ {% raw %}{{ amount }}{% endraw %}";
       switch (a.match(o)[1]) {
           case "amount":
               i = r(money, 2);
               break;
           case "amount_no_decimals":
               i = r(money, 0);
               break;
           case "amount_with_comma_separator":
               i = r(money, 2, ".", ",");
               break;
           case "amount_no_decimals_with_comma_separator":
               i = r(money, 0, ".", ",");
               break;
           case "amount_with_space_separator":
               i = r(money, 2, ".", " ");
               break;
           case "amount_no_decimals_with_space_separator":
               i = r(money, 0, ".", " ");
               break;
       }
       return a.replace(o, i);
   };
   window.WR.common.Shopify.saveProduct = function (handle, product) {
       if (typeof handle === 'string' && typeof window.WR.common.Shopify.products[handle] === 'undefined') {
           if (typeof product === 'number') {
               window.WR.common.Shopify.handles[product] = handle;
               product = {id: product};
           }
           window.WR.common.Shopify.products[handle] = product;
       }
   };
   window.WR.common.Shopify.saveVariant = function (variant_id, variant) {
       if (typeof variant_id === 'number' && typeof window.WR.common.Shopify.variants[variant_id] === 'undefined') {
           window.WR.common.Shopify.variants[variant_id] = variant;
       }
   };
   {%- comment -%} product data {%- endcomment -%}
   window.WR.common.Shopify.products = window.WR.common.Shopify.products || {};
   window.WR.common.Shopify.variants = window.WR.common.Shopify.variants || {};
   window.WR.common.Shopify.handles = window.WR.common.Shopify.handles || {};
   {%- if template == 'product' -%}
       window.WR.common.Shopify.handle = {{ product.handle | json }}
   {%- endif -%}

   {%- comment -%} product page {%- endcomment -%}
   window.WR.common.Shopify.saveProduct({{ product.handle | json }}, {{ product.id | json }});
   {%- for variant in product.variants -%}window.WR.common.Shopify.saveVariant({{ variant.id | json }}, { product_id: {{ product.id | json }}, product_handle: {{ product.handle | json }}, product_tags: {{ product.tags | json }}, price: {{ variant.price | json }}});{%- endfor -%}

   {%- comment -%} collection page {%- endcomment -%}
   {%- for product in collection.products -%}
   {%- if product.metafields.inventory.ShappifyHidden == 'true' -%}{%- continue -%}{%- endif -%}

       window.WR.common.Shopify.saveProduct({{ product.handle | json }}, {{ product.id | json }});
       {%- for variant in product.variants -%}window.WR.common.Shopify.saveVariant({{ variant.id | json }}, { product_id: {{ product.id | json }}, product_handle: {{ product.handle | json }}, product_tags: {{ product.tags | json }}, price: {{ variant.price | json }}});{%- endfor -%}
   {%- endfor -%}

   {%- comment -%} search page {%- endcomment -%}
   {%- for product in search.results -%}
   {%- if product.metafields.inventory.ShappifyHidden == 'true' -%}{%- continue -%}{%- endif -%}

       window.WR.common.Shopify.saveProduct({{ product.handle | json }}, {{ product.id | json }});
       {%- for variant in product.variants -%}window.WR.common.Shopify.saveVariant({{ variant.id | json }}, { product_id: {{ product.id | json }}, product_handle: {{ product.handle | json }}, product_tags: {{ product.tags | json }}, price: {{ variant.price | json }}});{%- endfor -%}
   {%- endfor -%}

   {%- comment -%} cart page {%- endcomment -%}
   {%- for item in cart.items -%}window.WR.common.Shopify.saveVariant({{ item.variant_id | json }}, { product_id: {{ item.product.id | json }}, product_handle: {{ item.product.handle | json }}, product_tags: {{ item.product.tags | json }}, price: {{ item.variant.price | json }}});{%- endfor -%}
</script>

{%- comment -%} INCLUDE APP SCRIPTS BELOW {%- endcomment -%}
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"
  integrity="sha512-qTXRIMyZIFb8iQcfjXWCO8+M5Tbc38Qi5WzdPOYZHIlZpzBHG3L3by84BBBOiRGiEb7KKtAOAs5qYdUiZiQNNQ=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.33/moment-timezone-with-data.min.js"
  integrity="sha512-rjmacQUGnwQ4OAAt3MoAmWDQIuswESNZwYcKC8nmdCIxAVkRC/Lk2ta2CWGgCZyS+FfBWPgaO01LvgwU/BX50Q=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
></script>
<script
  src="https://{{ shop.permanent_domain }}/a/apps/delivery-pickup-newDesignv4.1.js?v={{'now' | date: '%s' }}"
  defer="defer"
></script>
