window.PXUTheme.jsCollection={init:function(e){window.PXUTheme.jsCollection=$.extend(this,window.PXUTheme.getSectionData(e)),!!navigator.userAgent.match(/Trident.*rv\:11\./)||window.Shopify.loadFeatures([{name:"shopify-xr",version:"1.0"},{name:"model-viewer-ui",version:"1.0"}]),1==this.enable_sorting&&$("#sort-by").val($("#sort-by").data("default-sort")),1!=this.enable_filter&&1!=this.enable_sorting||$("#tag_filter, #sort-by").on("change",function(){window.PXUTheme.jsCollection.filterURL()}),$("[data-option-filter]").length&&$("[data-tag-filter-checkbox]:checked").each(function(){window.PXUTheme.jsCollection.multiTagFilter.showSelectedFilter($(this))}),this.enable_breadcrumb&&"basic_pagination"==this.pagination_type&&window.PXUTheme.breadcrumbs.init(this.number_of_pages),$("body").on("click","[data-option-filter]",function(e){e.preventDefault(),$(this).find("input").prop("checked",!0),window.PXUTheme.jsCollection.multiTagFilter.init($(this)),window.PXUTheme.scrollToTop($(".collection__content"))}),$("body").on("click","[data-clear-filter]",function(){const e=$(this).siblings("[data-option-filter]");$("#tag_filter").find("option:eq(0)").prop("selected",!0),window.PXUTheme.jsCollection.multiTagFilter.clearSelectedFilter(e),window.PXUTheme.scrollToTop($(".collection__content"))})},filterURL:function(){var e=[],t="",i="";if($.url("hostname"),window.PXUTheme.routes.root_url.length>1)var o=($.url("1")?"/"+$.url("1")+"/":"")+($.url("2")?$.url("2")+"/":"")+($.url("3")?$.url("3")+"/":"");else o=($.url("1")?"/"+$.url("1")+"/":"")+($.url("2")?$.url("2")+"/":"");if(t=$("#sort-by").length?$("#sort-by").val():url("?sort_by"),$("#tag_filter").length&&$("#tag_filter").data("default-collection")!=$("#tag_filter").val()){var n=$("#tag_filter").val().substr($("#tag_filter").val().lastIndexOf("/")+1);"all"!=n&&($.inArray(n,e)>-1||e.unshift(n))}$("[data-option-filter] input:checked").each(function(){e.push($(this).val())}),e=$.makeArray(e),$.each(e,function(t,o){t!=e.length-1?i+=e[t]+"+":i+=e[t]}),window.PXUTheme.queryParameters.sort_by=t,t="?"+$.param(window.PXUTheme.queryParameters),this.processUrl(o,i,t)},processUrl:function(e,t,i){var o;o=e+t+(i=i.replace(/\page=(\w+)&/,"")),this.updateView(o)},updateView:function(e){$.ajax({type:"GET",url:e,beforeSend:function(){$(".collection-matrix").addClass("fadeOut animated loading-in-progress"),$(".collection-matrix__wrapper .collection__loading-icon").fadeIn()},success:function(e){},error:function(t,i,o){console.log(t),console.log(i),console.log(o),location.replace(location.protocol+"//"+location.host+e)},dataType:"html"}).then(function(t){const i=$(".breadcrumb__container"),o=$(".collection-matrix"),n=$("[data-collection-main]"),l=$(t).find(".breadcrumb__container").html();i.html(l),o.removeClass("fadeIn animated loading-in-progress");const a=$(t).find(".collection-matrix__wrapper"),r=$(t).find(".container--pagination"),s=$(t).find(".container--no-products-in-collection");a.length?(n.empty(),n.append(a)):(n.empty(),n.append(s)),n.append(r),window.history&&window.history.pushState&&window.history.pushState("","",e),1==window.PXUTheme.theme_settings.enable_shopify_collection_badges&&window.PXUTheme.productReviews(),$("[data-custom-pagination]").length&&window.PXUTheme.infiniteScroll.init()})},multiTagFilter:{init:function(e){var t;this.showSelectedFilter(e),window.PXUTheme.jsCollection.filterURL(),t=window.PXUTheme.routes.root_url.length>1?3:2,"types"!==$.url(t)&&"vendors"!==$.url(t)||$(".block__tag-filter").remove()},showSelectedFilter:function(e){const t=e.parents(".sidebar-toggle-active"),i=e.parents(".tag-filter__item");if(i.addClass("is-active"),i.siblings(":not(.is-active)").addClass("is-hidden"),i.find("[data-clear-filter]").removeClass("is-hidden"),t.length){let e=t.find('[data-sidebar-block__toggle="closed"]');window.PXUTheme.jsSidebar.openSidebarBlock(e)}},clearSelectedFilter:function(e){const t=e.parents(".tag-filter__item");t.removeClass("is-active").find("input").prop("checked",!1),t.siblings().removeClass("is-hidden"),t.find("[data-clear-filter]").addClass("is-hidden"),window.PXUTheme.jsCollection.filterURL()}},unload:function(e){$("#tag_filter, #sort-by").off(),$("[data-option-filter]").off(),$("[data-reset-filters]").off(),$("[data-clear-filter]").off(),window.PXUTheme.breadcrumbs.unload()}};